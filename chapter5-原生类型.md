chapter5 åŸç”Ÿç±»å‹
=================

#### å¸ƒå°”å‹ï¼š

å¸ƒå°”ç±»å‹ï¼ˆ`bool`ï¼‰åªæœ‰ä¸¤ä¸ªå€¼ï¼š`true` å’Œ `false`ï¼š

```rust
let x = true;
let y: bool = false;
```

å¸ƒå°”å‹é€šå¸¸ç”¨åœ¨ `if` è¯­å¥ä¸­, ä¹Ÿå¯ä»¥ç”¨åœ¨ `match` è¯­å¥ä¸­ï¼š

```rust
fn main() {
    let praise_the_borrow_checher = true;

    if praise_the_borrow_checher {
        println!("oh, yeah!");
    } else {
        println!("what?!!");
    }

    match praise_the_borrow_checher {
        true => println!("keep praising!"),
        false => println!("you should praise!"),
    }
}
```

è¿˜å¯ä»¥å°†å­—ç¬¦ä¸² â€œtrueâ€ å’Œ â€œfalseâ€ è½¬æ¢ä¸º `bool`:

```rust
use std::str::FromStr;

fn main() {
    assert_eq!(FromStr::from_str("true"), Ok(true));
    assert_eq!(FromStr::from_str("false"), Ok(false));
    assert!(<bool as FromStr>::from_str("not even a boolean").is_err());
}
```

ä¹Ÿå¯ä»¥è¿™æ ·ï¼š

```rust
    assert_eq!("true".parse(), Ok(true));
    assert_eq!("false".parse(), Ok(false));
    assert!("not even a boolean".parse::<bool>().is_err());
```

å¯ä»¥åœ¨[æ ‡å‡†åº“æ–‡æ¡£](https://doc.rust-lang.org/std/primitive.bool.html)æŸ¥çœ‹æ›´å¤š `bool` çš„è¯´æ˜ã€‚

#### char

`char` ç±»å‹ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„ Unicode å­—ç¬¦çš„å€¼ã€‚å¯ä»¥ä½¿ç”¨å•å¼•å· `'` åˆ›å»º `char`:

```rust
let x = 'x';
let two_hearts = 'ğŸ’•';
```

ä¸å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼ŒRust çš„ `char` å¹¶ä¸æ˜¯1ä¸ªå­—èŠ‚ï¼Œè€Œæ˜¯4ä¸ªã€‚å› è€Œæˆ‘ä»¬å¯ä»¥å°†å„ç§å¥‡æ€ªçš„å­—ç¬¦éšå¿ƒæ‰€æ¬²çš„èµ‹å€¼ç»™ä¸€ä¸ª `char` ç±»å‹ã€‚

å¯ä»¥åœ¨[æ ‡å‡†åº“æ–‡æ¡£](https://doc.rust-lang.org/std/primitive.char.html)æŸ¥çœ‹æ›´å¤š `char` çš„è¯´æ˜ã€‚

#### æ•°å­—ç±»å‹

æ•°å­—ç±»å‹åˆ†ä¸ºæœ‰ç¬¦å·æ•´æ•°ï¼ˆ`i8`, `i16`, `i32`, `i64`, `isize`ï¼‰ã€æ— ç¬¦å·æ•´æ•°ï¼ˆ`u8`, `u16`, `u32`, `u64`, `usize`ï¼‰å’Œæµ®ç‚¹æ•°ï¼ˆ`f32`, `f64`ï¼‰ã€‚å…¶ä¸­ï¼Œ`isize` å’Œ `usize` ä¹Ÿç§°ä¸ºå¯å˜å¤§å°ç±»å‹æˆ–è‡ªé€‚åº”ç±»å‹ï¼Œå…¶å¤§å°ä¾èµ–åº•å±‚æœºå™¨æŒ‡é’ˆå¤§å°ï¼Œæ„æ€å°±æ˜¯ï¼š32ä½ç”µè„‘ä¸Šå°±æ˜¯32ä½ï¼Œ64ä½ç”µè„‘ä¸Šå°±æ˜¯64ä½ã€‚

å¦‚æœä¸€ä¸ªæ•°å­—ï¼Œæ²¡æœ‰æ¨æ–­å®ƒç±»å‹çš„æ¡ä»¶ï¼Œå°†é‡‡ç”¨é»˜è®¤ç±»å‹ï¼š

```rust
let x = 123; //i32
let y = 1.23; //f64;
let c = -456; //i32;
```

éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™é‡Œçš„â€œæ²¡æœ‰æ¨æ–­å®ƒç±»å‹çš„æ¡ä»¶â€ ä¸­çš„ â€œæ¡ä»¶â€ã€‚æ¯”å¦‚ï¼š

```rust
fn main() {
    let a = 18446744073709551615;
    println!("{:?}", a);
}
```

Rust ä¸ä¼šæ ¹æ®èµ‹ç»™ `a` çš„å€¼æ¨æ–­ `a` çš„ç±»å‹ï¼Œ`a` ä»ç„¶æ˜¯i32ç±»å‹ï¼ŒæŠŠä¸€ä¸ªå¤§äº32ä½çš„å€¼èµ‹ç»™i32ç±»å‹ï¼Œä¼šè­¦å‘Šè¶Šç•Œï¼š

```rust
   Compiling hello_world v0.1.0 (yourpath/hello_world)
warning: literal out of range for i32, #[warn(overflowing_literals)] on by default
 --> main.rs:2:13
  |
2 |     let a = 18446744073709551615;
  |             ^^^^^^^^^^^^^^^^^^^^

    Finished debug [unoptimized + debuginfo] target(s) in 0.47 secs
     Running `yourpath\hello_world\target\debug\hello_world.exe`
-1
```

å³ä½¿èƒ½ç¼–è¯‘æˆåŠŸï¼Œä¹Ÿå°†å˜ä¸º-1ã€‚å¦‚æœç»™å®šä¸€ä¸ªæ¥æ”¶è€…ï¼Œæ¯”å¦‚ä¸€ä¸ªå‡½æ•°ï¼š

```rust
fn main() {
    let a = 18446744073709551615;
    print(a);
}

fn print(n: u64) {
    println!("{:?}", n);
}
```

è¿™æ ·ï¼ŒRust å°±èƒ½æ ¹æ® `print` å‡½æ•°æ‰€æ¥å—çš„ `u64` ç±»å‹æ¨æ–­å‡º `a` çš„ç±»å‹ä¸º `u64`ã€‚

å¦‚æœæ˜¾ç¤ºçš„æ ‡æ³¨ç±»å‹ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

```rust
let x: i32 = 123;
let y: f64 = 1.23;
```

æˆ–è€…é€šè¿‡åç¼€çš„æ–¹å¼ï¼š

```rust
let x = 123i32;
let y = 1.23f64;
```

ä»¥ä¸Šä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ã€‚

ä¸ºäº†å¯è¯»æ€§ï¼Œå¯ä»¥åœ¨æ•°å­—ä¹‹é—´åŠ ä¸Šä¸‹åˆ’çº¿ `_`ï¼š

```rust
let x = 1_000i32; // 1000
let y = 1_234_567; // 1234567
let z = 0.000_001; // 0.000001
```

å¦‚æœä½ æƒ³çš„è¯ï¼Œè¿™æ ·éƒ½å¯ä»¥ï¼š

```rust
let x = 1000_i32;
let y = 1.23_f64;
```

è¿˜å¯ä»¥åŠ ä¸Šå‰ç¼€ `0x`ã€`0o`ã€`0b` åˆ†åˆ«è¡¨ç¤ºåå…­è¿›åˆ¶æ•°ã€å…«è¿›åˆ¶æ•°ã€äºŒè¿›åˆ¶æ•°ï¼š

```rust
let a = 0b11111111; //255
let b = 0o77777777; //16777215
let c = 0xFFFFFF;  //16777215
```

å¯ä»¥æ ‡å‡†åº“æ–‡æ¡£ä¸­æŸ¥çœ‹æ¯ç§ç±»å‹çš„è¯¦ç»†è¯´æ˜ï¼š[i8](https://doc.rust-lang.org/std/primitive.i8.html)ï¼Œ[i16](https://doc.rust-lang.org/std/primitive.i16.html)ï¼Œ[i32](https://doc.rust-lang.org/std/primitive.i32.html)ï¼Œ[i64](https://doc.rust-lang.org/std/primitive.i64.html)ï¼Œ[u8](https://doc.rust-lang.org/std/primitive.u8.html)ï¼Œ[u16](https://doc.rust-lang.org/std/primitive.u16.html)ï¼Œ[u32](https://doc.rust-lang.org/std/primitive.u32.html)ï¼Œ[u64](https://doc.rust-lang.org/std/primitive.u64.html)ï¼Œ[isize](https://doc.rust-lang.org/std/primitive.isize.html)ï¼Œ[usize](https://doc.rust-lang.org/std/primitive.usize.html)ï¼Œ[f32](https://doc.rust-lang.org/std/primitive.f32.html)ï¼Œ[f64](https://doc.rust-lang.org/std/primitive.f64.html)ã€‚

#### æ•°ç»„(array)

æ•°ç»„æ˜¯ä¸€ç»„åŒ…å«ç›¸åŒæ•°æ®ç±»å‹ `T` çš„ç»„åˆï¼Œå¹¶å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜åŒºä¸­ã€‚æ•°ç»„ä½¿ç”¨ä¸­æ‹¬å· `[]` æ¥åˆ›å»ºï¼Œå…¶å¤§å°åœ¨ç¼–è¯‘æœŸé—´å°±å·²ç¡®å®šï¼Œæ•°ç»„çš„ç±»å‹è¢«æ ‡è®°ä¸º `[T; size]`ï¼Œè¡¨ç¤ºä¸€ä¸ªæ‹¥æœ‰ `T` ç±»å‹ï¼Œ`size` ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚æ•°ç»„çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä½†å…¶ä¸­çš„å…ƒç´ å¯ä»¥è¢«æ›´æ”¹ã€‚

```rust
fn main() {
    let mut array: [i32; 3] = [0; 3]; // 0, 0, 0

    array[1] = 1;
    array[2] = 2;

    println!("{:?}", array); // 0, 1, 2
}
```

å¯ä»¥ç”¨ `array.len()` è·å–æ•°ç»„çš„å…ƒç´ æ•°é‡ï¼š

```rust
fn main() {
    let array = [0; 20];
    println!("{:?}", array.len()); // 20
}
```

å¯ä»¥ä½¿ç”¨ä¸‹æ ‡è®¿é—®ç‰¹å®šå…ƒç´ ï¼š

```rust
fn main() {
    let names = ["Graydon", "Brian", "Niko"]; // names: [&str, 3]
    println!("The second name is: {}", names[1]); // Brian
}
```

è·Ÿå¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œä¸‹æ ‡ä»0å¼€å§‹ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ `names[0]`, ç¬¬äºŒä¸ªæ˜¯ `names[1`ã€‚å¦‚æœä½ å°è¯•ä½¿ç”¨ä¸€ä¸ªä¸å­˜åœ¨äºæ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œæ•°ç»„è®¿é—®ä¼šåœ¨è¿è¡Œæ—¶è¿›è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚

å¯ä»¥åœ¨[æ ‡å‡†åº“æ–‡æ¡£](https://doc.rust-lang.org/std/primitive.array.html)ä¸­æŸ¥çœ‹æ›´å¤š `array` çš„è¯¦ç»†è¯´æ˜ã€‚

#### åˆ‡ç‰‡ï¼ˆsliceï¼‰

åˆ‡ç‰‡æ˜¯ä¸€ä¸ªæ•°ç»„çš„å¼•ç”¨ï¼ˆæˆ–è€…â€œè§†å›¾â€ï¼‰ã€‚å®ƒæœ‰åˆ©äºå®‰å…¨ï¼Œæœ‰æ•ˆçš„è®¿é—®æ•°ç»„çš„ä¸€éƒ¨åˆ†è€Œä¸ç”¨è¿›è¡Œæ‹·è´ã€‚æ¯”å¦‚ï¼Œä½ å¯èƒ½åªæƒ³è¦å¼•ç”¨è¯»å…¥åˆ°å†…å­˜æ–‡ä»¶ä¸­çš„ä¸€è¡Œã€‚åŸç†ä¸Šï¼Œåˆ‡ç‰‡å¹¶ä¸æ˜¯ç›´æ¥åˆ›å»ºçš„ï¼Œè€Œæ˜¯å¼•ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å˜é‡ã€‚ç‰‡æ®µæœ‰é¢„å®šä¹‰é•¿åº¦ï¼Œå¯ä»¥æ˜¯å¯å˜çš„ä¹Ÿå¯ä»¥æ˜¯ä¸å¯å˜çš„ï¼Œä½†æ˜¯å…¶èŒƒå›´ä¸èƒ½è¶…è¿‡æ•°ç»„çš„å¤§å°ã€‚

åœ¨åº•å±‚ï¼Œåˆ‡ç‰‡ä»£è¡¨ä¸€ä¸ªæŒ‡å‘æ•°æ®å¼€å§‹çš„æŒ‡é’ˆå’Œä¸€ä¸ªé•¿åº¦ã€‚

ä¸€ä¸ªåˆ‡ç‰‡çš„è¡¨è¾¾å¼å¯ä»¥ä¸º `[T]` æˆ– `&mut [T]`ã€‚

```rust
let array = [1, 2, 3, 4, 5, 6];
let slice_complete = &array[..]; // è·å–å…¨éƒ¨å…ƒç´ 
let slice_middle = &array[1..4]; // è·å–ä¸­é—´å…ƒç´ ï¼Œå–å¾—çš„ Slice ä¸º [2, 3, 4]ã€‚åˆ‡ç‰‡éµå¾ªå·¦é—­å³å¼€åŸåˆ™ã€‚
let slice_right = &array[1..]; // [2, 3, 4, 5, 6]
let slice_left = &array[..3]; // [1, 2, 3]
```

å¯ä»¥åœ¨[æ ‡å‡†åº“æ–‡æ¡£](https://doc.rust-lang.org/std/primitive.slice.html)ä¸­æŸ¥çœ‹æ›´å¤šåˆ‡ç‰‡çš„è¯´æ˜ã€‚

#### å…ƒç»„ï¼ˆtuplesï¼‰

å…ƒç»„æ˜¯å›ºå®šå¤§å°çš„æœ‰åºåˆ—è¡¨ï¼Œä½¿ç”¨æ‹¬å· `()` æ¥æ„æˆï¼Œæ¯ä¸ªå…ƒç»„çš„å€¼éƒ½æ˜¯ `(T1, T2, ...)`ç±»å‹æ ‡è®°çš„å½¢å¼ï¼Œå…¶ä¸­ `T1, T2` æ˜¯æ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚ å¦‚ä¸‹ï¼š

```rust
let x = (1, "hello", "world");
```

è¿™æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º3çš„å…ƒç»„ï¼Œä¸‹é¢æ˜¯åŒæ ·çš„å…ƒç»„ï¼Œä¸è¿‡æ³¨æ˜äº†æ•°æ®ç±»å‹ï¼š

```rust
let x: (i32, &str, &str) = (1, "hello", "world");
```

å¦‚ä½ æ‰€è§ï¼Œå…ƒç»„çš„ç±»å‹è·Ÿå…ƒç»„çœ‹èµ·æ¥å¾ˆåƒï¼Œåªä¸è¿‡ç±»å‹å–ä»£å€¼çš„ä½ç½®ã€‚

å¯ä»¥æŠŠä¸€ä¸ªå…ƒç»„èµ‹å€¼ç»™å¦ä¸€ä¸ªï¼Œå¦‚æœä»–ä»¬åŒ…å«ç›¸åŒçš„ç±»å‹å’Œæ•°é‡ã€‚å½“å…ƒç»„æœ‰ç›¸åŒçš„é•¿åº¦æ—¶ä»–ä»¬åç›¸åŒçš„æ•°é‡ã€‚

```rust
let mut x = (1, 2); // x: (i32, i32)
let y = (2, 3); // y: (i32, i32)

x = y;
```

å¯ä»¥é€šè¿‡ä¸€ä¸ª`let` â€œè§£æ„â€è®¿é—®å…ƒç»„ä¸­çš„å­—æ®µï¼š

```rust
let (x, y, z) = (1, 2, 3);

println!("x is {}", x);
```

æˆ‘ä»¬å¯ä»¥åœ¨ `let` å·¦ä¾§å†™ä¸€ä¸ªæ¨¡å¼ï¼Œå¦‚æœèƒ½åŒ¹é…å³ä¾§çš„è¯ï¼Œå¯ä»¥ä¸€æ¬¡å†™å¤šä¸ªç»‘å®šã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ`let` â€œè§£æ„â€ æˆ– â€œæ‹†å¼€â€ äº†å…ƒç»„ï¼Œå¹¶åˆ†æˆäº†ä¸‰ä¸ªç»‘å®šã€‚è¿™ä¸ªæ¨¡å¼æ—¶å¾ˆå¼ºå¤§çš„ã€‚

å¯ä»¥ç”¨ä¸€ä¸ªé€—å·æ¥æ¶ˆé™¤ä¸€ä¸ªå•å…ƒç´ å…ƒç»„å’Œä¸€ä¸ªæ‹¬å·ä¸­çš„å€¼çš„æ­§ä¹‰ï¼š

```rust
(0, );
(0);
```

å¯ä»¥ç”¨ç´¢å¼•è®¿é—®ä¸€ä¸ªå…ƒç»„ä¸­çš„å­—æ®µï¼š

```rust
let tuple = (1, 2, 3);

let x = tuple.0; // 1
let y = tuple.1; // 2
let x = tuple.2; // 3
```

å°±åƒæ•°ç»„ç´¢å¼•ï¼Œå…ƒç»„ç´¢å¼•ä» `0` å¼€å§‹ï¼Œä¸è¿‡ä¹Ÿä¸åƒæ•°ç»„ç´¢å¼•ï¼Œå®ƒä½¿ç”¨ `.`, è€Œä¸æ˜¯ `[]`ã€‚

å‡½æ•°å¯ä»¥åˆ©ç”¨å…ƒç»„æ¥æ”¾å›å¤šä¸ªå€¼ï¼Œå› ä¸ºå…ƒç»„å¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡ã€ä¸åŒç±»å‹çš„å€¼ã€‚

```rust
fn mian() {
    let (p2, p3) = pow_2_3(456);
    println!("pow 2 of 456 is {}.", p2);
    println!("pow 3 of 456 is {}.", p3);
}

fn pow_2_3(n: i32) -> (i32, i32) {
    (n * n, n * n * n)
}
```

å¯ä»¥åœ¨[æ ‡å‡†åº“æ–‡æ¡£](https://doc.rust-lang.org/std/primitive.tuple.html)ä¸­æŸ¥çœ‹æ›´å¤šå…ƒç»„çš„è¯´æ˜ã€‚

#### str

Rust çš„ `str` ç±»å‹æ˜¯æœ€åŸå§‹çš„å­—ç¬¦ä¸²ç±»å‹ã€‚ä½œä¸ºä¸€ä¸ªä¸å®šé•¿ç±»å‹ï¼Œå®ƒæœ¬èº«å¹¶ä¸æ˜¯éå¸¸æœ‰ç”¨ï¼Œä¸è¿‡å½“å®ƒåœ¨å¼•ç”¨åå°±æ˜¯æœ‰ç”¨çš„äº†ï¼Œä¾‹å¦‚ `&str`ã€‚äº‹å®ä¸Šï¼ŒRust ä¸­æ‰€æœ‰ç”¨ `""` åŒ…è£¹èµ·æ¥çš„éƒ½å¯ä»¥ç§°ä¸º `&str`ï¼Œä½†æ˜¯è¿™ä¸ªç±»å‹å•ç‹¬ä½¿ç”¨çš„æƒ…å†µå¾ˆå°‘ã€‚å°†åœ¨åç»­ç« èŠ‚è¯¦ç»†ä»‹ç»å­—ç¬¦ä¸²ç±»å‹ã€‚

å¯ä»¥åœ¨[æ ‡å‡†åº“æ–‡æ¡£](https://doc.rust-lang.org/std/primitive.str.html)ä¸­æŸ¥çœ‹æ›´å¤š `str` çš„è¯´æ˜ã€‚

#### å‡½æ•°

å‡½æ•°ä¹Ÿæœ‰ä¸€ä¸ªç±»å‹ï¼Œä»–ä»¬çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```rust
fn foo(x: i32) -> i32 { x }

let x: fn(i32) -> i32 = foo;
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`x` æ˜¯ä¸€ä¸ªâ€œå‡½æ•°æŒ‡é’ˆâ€ï¼ŒæŒ‡å‘ä¸€ä¸ªè·å–ä¸€ä¸ª `i32` å‚æ•°å¹¶è¿”å›ä¸€ä¸ª `i32` å€¼çš„å‡½æ•°ã€‚










